{% extends "_base.html" %}
{% block title %}Milestones{% endblock %}

{% block content %}
<h1>Milestones</h1>

<div class="milestone-list">
  {% for m in milestones %}
    <div class="milestone-item">
      <div class="milestone-title">
        <strong>{{ m.title }}</strong>
        {% if m.due_date %}
          <span class="milestone-due">Â· Due {{ m.due_date }}</span>
        {% endif %}
      </div>

      <div class="milestone-actions">
        {% if m.id in submitted_ids %}
          <span class="badge badge-success">Submitted âœ“</span>
        {% else %}
          <a href="{% url 'grading:submit' %}?milestone={{ m.id }}" class="btn-sm">
            Submit Work
          </a>
        {% endif %}

        {% if request.user.is_staff %}
          <a href="{% url 'grading:milestone_submissions' m.id %}" class="btn-sm btn-staff">
            View Submissions
          </a>
        {% endif %}
      </div>
    </div>
  {% endfor %}
</div>

{% if request.user.is_staff %}
  <hr style="margin-top:2rem;">
  <p>
    <a href="{% url 'grading:export' %}" class="btn">ðŸ“„ Export Grades (CSV)</a>
  </p>
{% endif %}
{% endblock %}
