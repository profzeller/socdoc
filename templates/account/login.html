{% extends "_base.html" %}
{% load socialaccount %}

{% block title %}Sign In{% endblock %}
{% block content %}
<div style="max-width:460px;margin:2rem auto;">
  <h1 style="margin-bottom:1rem;">Sign in</h1>

  <!-- Primary: Discord -->
  <a href="{% provider_login_url 'discord' process='login' %}"
     style="display:block;text-align:center;background:#5865F2;color:#fff;padding:.75rem 1rem;border-radius:.5rem;
            text-decoration:none;font-weight:600;">
    Continue with Discord
  </a>

  <!-- Divider -->
  <div style="display:flex;align-items:center;gap:.75rem;margin:1rem 0;">
    <div style="flex:1;height:1px;background:#e5e7eb;"></div>
    <div style="color:#6b7280;font-size:.9rem;">or</div>
    <div style="flex:1;height:1px;background:#e5e7eb;"></div>
  </div>

  <!-- Secondary: Email/password (collapsed by default) -->
  <details>
    <summary style="cursor:pointer;color:#2563eb;font-size:.95rem;">
      Use email/password instead
    </summary>
    <div style="margin-top:1rem;">
      {% if form.errors %}
        <p style="color:#b91c1c;margin:.25rem 0 .75rem;">Please check your email or password.</p>
      {% endif %}
      <form method="post" action="{% url 'account_login' %}">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" style="width:100%;padding:.6rem 1rem;border-radius:.375rem;
                                     background:#111827;color:#fff;border:none;">
          Sign in with email
        </button>
      </form>
    </div>
  </details>

  <p style="margin-top:1rem;font-size:.9rem;color:#6b7280;">
    No account? <a href="{% url 'account_signup' %}" style="color:#2563eb;">Sign up</a>
  </p>
</div>
{% endblock %}
